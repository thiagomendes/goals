<menu></menu>
<main role="main" class="container">

    <div class="goals-template">
        <h2>Creating a Budget For Goal: {{goal.name}}</h2>

        <form class="mt-4" ng-submit="submit()" ng-show="!isSuccess">

            <div class="form-group">
                <label for="budget-description">Description</label>
                <input ng-model="budget.description" type="text" class="form-control" id="budget-description" placeholder="Budget Description"
                    required autofocus>
            </div>

            <div class="form-group">
                <label for="expected-date">Expected Date</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <span class="input-group-addon">
                                <i class="fa fa-calendar" aria-hidden="true"></i>
                            </span>
                        </div>
                    </div>
                    <input ng-model="budget.expectedDate" type="text" class="form-control" id="expected-date" placeholder="Date When You Will Receive This Amount"
                        required>
                </div>
            </div>

            <div class="form-group">
                <label for="amount">Amount</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <span class="input-group-addon">
                                <i class="fa fa-money" aria-hidden="true"></i>
                            </span>
                        </div>
                    </div>
                    <input ng-model="budget.amount" type="text" class="form-control" id="amount" placeholder="Amount That You Will Receive" required>
                </div>
            </div>

            <div class="form-group">
                <label for="budget-status">Status</label>
                <select ng-model="budget.status" class="form-control" id="budget-status" required>
                    <option value="0" selected>Expected</option>
                    <option value="1">Received</option>
                </select>
            </div>

            <ul class="nav justify-content-end my-4">
                <li class="nav-item">
                    <button ng-click="cancel()" type="button" class="btn btn-secondary mx-2">Cancel</button>
                </li>
                <li class="nav-item">
                    <button type="submit" class="btn btn-primary ml-2">Save</button>
                </li>
            </ul>

        </form>

    </div>
</main>
<div id="response" class="my-5 mx-5">
    <div id="response-error" ng-show="isError">
        <div class="alert alert-danger text-center">
            <strong>Error:</strong> {{message}}
        </div>
    </div>
    <div id="response-success" ng-show="isSuccess">
        <div class="alert alert-success">
            <strong>Success:</strong> {{message}}
        </div>
        <div>
            <p class="mx-5 my-5">
                <strong>Congratulations</strong>, you just create a new budget for goal '{{goal.name}}', now you can
                <a href="/app/goals/{{goal._id}}">go to this goal page</a>.
            </p>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        //masking expected date input
        $('#expected-date').datepicker({
            orientation: "bottom auto",
            autoclose: true,
            todayHighlight: true,
        });

        //masking amount input
        $("#amount").inputmask('currency', {
            "autoUnmask": true,
            radixPoint: ",",
            groupSeparator: ".",
            allowMinus: false,
            prefix: '',
            digits: 2,
            digitsOptional: false,
            rightAlign: false,
            unmaskAsNumber: true
        });
    });
</script>